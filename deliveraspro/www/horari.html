<!DOCTYPE html>


<html>

<head>
    <meta charset="utf-8">
    <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:;"> -->
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="initial-scale=1, width=device-width, viewport-fit=cover">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="css/menu.css">
    <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">
    <script src="./js/camara.js"></script>
    <script src="https://kit.fontawesome.com/375402e313.js" crossorigin="anonymous"></script>
    <script src="js/jquery-3.6.0.js" type="text/javascript"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <title>Deliverass Pro</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
        integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
        crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
        integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
        crossorigin=""></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css"
        integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous">

</head>

<body>
    
        <img src="img/Logotip.png" class="logo-main" />
        <div id="estat-jornada"></div>
        <button id="inici" class="inici-jornada">INICI JORNADA</button>
        <button id="final" class="final-jornada">FI JORNADA</button>
        <nav class="menu">
            <input type="checkbox" href="#" class="menu-open" name="menu-open" id="menu-open" />
            <label class="menu-open-button" for="menu-open">
                <span class="lines line-1"></span>
                <span class="lines line-2"></span>
                <span class="lines line-3"></span>
            </label>

            <a href="menu.html" class="menu-item red"> <i class="fa-solid fa-location-dot"></i></a>
            <a href="#" class="menu-item red" onclick="window.location.reload();"> <i class="fas fa-sync-alt"></i></a>
            <a href="horari.html" class="menu-item red"><i class="fa-regular fa-clock"></i> </a>
            <a href="llistat.html" class="menu-item red"> <i class="fas fa-list-check"> </i></a>
        </nav>
    

    <script src="cordova.js"></script>
    <script type="text/javascript">

        $(document).ready(function(){
            $("#final").addClass("disabled");
            $("#final").css("opacity",".5");
            $("#final").css("pointer-events","none");
        })

        $("#inici").click(function(){
            var now = new Date(Date.now());
            var formatted = now.getHours() + "h:" + now.getMinutes() + "min:" + now.getSeconds() + "s";
            localStorage.setItem('hora', formatted);
            $("#estat-jornada").append("<strong>INICI DE JORNADA: </strong>" + localStorage.getItem('hora'));
            $("#inici").addClass("disabled");
            $("#inici").css("opacity",".5");
            $("#inici").css("pointer-events","none");
            $("#final").removeClass("disabled");
            $("#final").css("opacity","1");
            $("#final").css("pointer-events","inherit");

            var dni_enviar = localStorage.getItem('dni');

            if($.trim(dni_enviar).length > 0){
                event.preventDefault();
                $.ajax({
                    type: "POST",
                    crossDomain: true,
                    url: "http://192.168.1.40/deliverass_client/hora_entrada.php",
                    data: {
                        dni_treballador: dni_enviar,
                    },
                    cache: false,
                    success: function(data){
                        alert(data);
                    }
                })
            }else{
                alert("ERROR UGNMA");
            }
        })

        $("#final").click(function(){
            $("#inici").removeClass("disabled");
            $("#inici").css("opacity","1");
            $("#inici").css("pointer-events","inherit");
            $("#final").addClass("disabled");
            $("#final").css("opacity",".5");
            $("#final").css("pointer-events","none");

            var dni_enviar = localStorage.getItem('dni');

            if($.trim(dni_enviar).length > 0){
                event.preventDefault();
                $.ajax({
                    type: "POST",
                    crossDomain: true,
                    url: "http://192.168.1.40/deliverass_client/hora_sortida.php",
                    data: {
                        dni_treballador: dni_enviar,
                    },
                    cache: false,
                    success: function(data){
                        alert(data);
                    }
                })
            }else{
                alert("ERROR UGNMA");
            }
        })

    </script>
</body>

</html>